<!DOCTYPE html>
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0">
	<title>Fanyi Translation Script &mdash; Jeremy Modjeska</title>

  <!-- SEO, Social -->
  <link rel="canonical" href="https://modjeska.us/code-fanyi-translation-script/">
	<meta name="description" content="Fanyi is a simple translation script that employs the free Microsoft Translator API to translate a newline-separated text file, line by line, into almost any language. This is a simple internationalization proof-of-concept.">
  <meta property="og:description" content="Fanyi is a simple translation script that employs the free Microsoft Translator API to translate a newline-separated text file, line by line, into almost any language. This is a simple internationalization proof-of-concept.">
  <meta name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1">
  <meta property="og:locale" content="en_US">
  <meta property="og:type" content="article">
  <meta property="og:title" content="Fanyi Translation Script &mdash; Jeremy Modjeska">
  <meta property="og:url" content="https://modjeska.us/code-fanyi-translation-script/">
  <meta property="og:site_name" content="Jeremy Modjeska">
  <meta property="og:image" content="https://i.modjeska.us/2018/08/code-card.png">
	<meta property="og:image:width" content="1000">
	<meta property="og:image:height" content="335">
	<meta property="og:image:type" content="image/png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@jmodjeska">
  <link rel="shortlink" href="https://modjeska.us/code-fanyi-translation-script/">

  <!-- Fonts + Styles -->
  <link rel="dns-prefetch" href="//use.fontawesome.com">
  <link rel="stylesheet" id="bootstrap-css" href="https://i.modjeska.us/css/bootstrap.min.css?ver=3.2.0" type="text/css" media="all">
  <link rel="stylesheet" id="wpbase-css" href="https://i.modjeska.us/css/wpbase.min.css?ver=3.2.0" type="text/css" media="all">
  <link rel="stylesheet" id="font-awesome-css" href="https://use.fontawesome.com/91b690d857.css?ver=4.1.0" type="text/css" media="all">
  <link rel="stylesheet" id="responsive-style-css" href="https://i.modjeska.us/css/style.css?ver=3.2.0" type="text/css" media="all">
  <link rel="stylesheet" id="supplemental-custom-css" href="https://i.modjeska.us/css/supplemental-style.css?ver=1.0" type="text/css" media="all">
  <link rel="stylesheet" id="crayon-css" href="https://i.modjeska.us/css/crayon.min.css?ver=_2.7.2_beta" type="text/css" media="all">
  <link rel="stylesheet" id="crayon-theme-github-css" href="https://i.modjeska.us/css/github.css?ver=_2.7.2_beta" type="text/css" media="all">
  <link rel="stylesheet" id="crayon-font-monaco-css" href="https://i.modjeska.us/css/monaco.css?ver=_2.7.2_beta" type="text/css" media="all">
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="https://i.modjeska.us/js/jquery.min.js?ver=3.6.1" id="jquery-core-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/jquery-migrate.min.js?ver=3.3.2" id="jquery-migrate-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/jquery.cycle.all.min.js?ver=6.1.7" id="jquery-cycle-js"></script>
  <script type="text/javascript" id="crayon_js-js-extra">
    /* <![CDATA[ */
    var CrayonSyntaxSettings = {"version":"_2.7.2_beta","is_admin":"0","ajaxurl":"https:\/\/modjeska.us\/wp-admin\/admin-ajax.php","prefix":"crayon-","setting":"crayon-setting","selected":"crayon-setting-selected","changed":"crayon-setting-changed","special":"crayon-setting-special","orig_value":"data-orig-value","debug":""};
    var CrayonSyntaxStrings = {"copy":"Press %s to Copy, %s to Paste","minimize":"Click To Expand Code"};
    /* ]]> */
  </script>
  <script type="text/javascript" src="https://i.modjeska.us/js/crayon.min.js?ver=_2.7.2_beta" id="crayon_js-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/responsive-modernizr.js?ver=2.5.3" id="modernizr-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/imagesloaded.pkgd.min.js?ver=6.1.7" id="imagesloaded-script-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/jquery.isotope.min.js?ver=6.1.7" id="isotope-script-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/bootstrap.js?ver=6.1.7" id="bootstrap-script-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/custom.js?ver=6.1.7" id="custom-script-js"></script>
  <script type="text/javascript" src="https://i.modjeska.us/js/newwindow.js?ver=1.0" id="newwindow-js"></script>

  <!-- Icons -->
  <link rel="icon" href="https://i.modjeska.us/icon/android-chrome-192x192.png?v=2" sizes="192x192">
  <link rel="icon" href="https://i.modjeska.us/icon/android-chrome-512x512.png?v=2" sizes="512x512">
  <link rel="apple-touch-icon" href="https://i.modjeska.us/icon/apple-touch-icon.png?v=2">
  <link rel="icon" type="image/png" sizes="32x32" href="https://i.modjeska.us/icon/favicon-32x32.png?v=2">
  <link rel="icon" type="image/png" sizes="16x16" href="https://i.modjeska.us/icon/favicon-16x16.png?v=2">

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-45674718-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-45674718-2');
  </script>
  <script>
    !function(){var analytics=window.analytics=window.analytics||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","once","off","on"];analytics.factory=function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t);analytics.push(e);return analytics}};for(var t=0;t<analytics.methods.length;t++){var e=analytics.methods[t];analytics[e]=analytics.factory(e)}analytics.load=function(t,e){var n=document.createElement("script");n.type="text/javascript";n.async=!0;n.src=("https:"===document.location.protocol?"https://":"http://")+"cdn.segment.com/analytics.js/v1/"+t+"/analytics.min.js";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(n,o);analytics._loadOptions=e};analytics.SNIPPET_VERSION="4.1.0";
    analytics.load("M5E8AntSbyIDwcFSvmjGjaKV8C931did");
    analytics.page();
    }}();
  </script>
</head>

<!-- Content -->
<body class="post-template-default single single-post single-format-standard">
  <header>
    <nav role="navigation">
      <div class="navbar navbar-default navbar-fixed-top">
        <div class="container">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-responsive-collapse">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="https://modjeska.us/" title="Jeremy Modjeska" rel="homepage">Jeremy Modjeska</a>
          </div>
          <div class="navbar-collapse collapse navbar-right navbar-responsive-collapse">
			      <ul id="menu-top-menu" class="nav navbar-nav-jm">
              <li id="menu-item-102" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-102"><a href="https://modjeska.us/pictures/">Pictures</a></li>
              <li id="menu-item-103" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-103"><a href="https://modjeska.us/words/">Words</a></li>
              <li id="menu-item-104" class="menu-item menu-item-type-custom menu-item-object-custom menu-item-104"><a href="https://modjeska.us/code/">Code</a></li>
            </ul>
          </div>
        </div><!-- /container -->
      </div><!-- /navbar -->
    </nav>
  </header>

  <div id="wrapper" class="clearfix">
    <div id="blogwrap"></div>
    <div class="container">
      <div class="row mt mb">
        <div class="col-lg-8 col-lg-offset-2">
          <article class="blog-wrap left">
            <div class="blog-media">
              <section class="post-entry">
                <header class="page-header blog-title">
                  <h1 class="general-title"><a href="https://modjeska.us/fanyi-translation-script/" rel="bookmark" title="Permanent Link to Fanyi Translation Script">Fanyi Translation Script</a></h1>
                  <div class="post-meta">
                    <p>Published on: <span class="publish-on">April 10, 2018</span></p>
                  </div>
                </header>
                <div class="post-desc">
                  <div class="publication-meta">source code</div>
                  <div class="github-link">
                    <a href="https://github.com/jmodjeska" target="_blank">jmodjeska</a> / <b>
                    <a href="https://github.com/jmodjeska/fanyi" target="_blank">fanyi</a></b>
                  </div>

                  <p>Fanyi is a simple translation script that employs the free <a href="http://www.microsoft.com/en-us/translator/getstarted.aspx">Microsoft Translator API</a> in order to translate a newline-separated text file, line by line, into almost any language. I wrote it to facilitate an internationalization proof-of-concept. Of course it isn&rsquo;t meant for production use since the quality of the translations will be poor.</p>
<p>The script allows for a custom list of excluded words or phrases, so you can exempt from translation your brand names, HTML entities, and other untranslatable strings. Since each line is treated as a single entity, excluded strings are skipped, then merged back in.</p>
<h3>Example</h3>
<p>Translate a three-line file into Chinese, excluding HTML entities and two brand names.</p>
<p><b>Input</b>:</p>
<pre>Acme company product home page
Click &lt;b&gt;here&lt;/b&gt; to login
Read about Acme's new product, the Cornballer!
</pre>
<p><b>Output</b>:</p>
<pre>Acme &#20844;&#21496;&#20135;&#21697;&#20027;&#39029;
&#28857;&#20987;&lt;b&gt;&#36825;&#37324;&lt;/b&gt;&#30331;&#24405;
&#38405;&#35835;Acme&#30340;&#26032;&#20135;&#21697;, Cornballer!
</pre>
<h3>Usage Synopsis</h3>
<p>Single file conversion:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

    <div id="crayon-676a611039d72553362873" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 10px; margin-bottom: 10px; font-size: 12px !important; line-height: 18px !important;">

      <div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 18px !important;">
perl fanyi.pl input_filename.txt output_filename.txt</textarea></div>
      <div class="crayon-main" style="">
        <table class="crayon-table">
          <tr class="crayon-row">
        <td class="crayon-nums " data-settings="show">
          <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 18px !important;"><div class="crayon-num" data-line="crayon-676a611039d72553362873-1">1</div></div>
        </td>
            <td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 18px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-676a611039d72553362873-1"><span class="crayon-e">perl </span><span class="crayon-v">fanyi</span><span class="crayon-e">.pl</span><span class="crayon-h"> </span><span class="crayon-v">input_filename</span><span class="crayon-e">.txt</span><span class="crayon-h"> </span><span class="crayon-v">output_filename</span><span class="crayon-e">.txt</span></div></div></td>
          </tr>
        </table>
      </div>
    </div>
<!-- [Format Time: 0.0011 seconds] -->
<p></p>
<p>Multiple file conversion recursively through a directory tree:</p>
<p></p><!-- Crayon Syntax Highlighter v_2.7.2_beta -->

    <div id="crayon-676a611039d7b678566938" class="crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-mac print-yes notranslate" data-settings=" minimize scroll-mouseover wrap" style=" margin-top: 10px; margin-bottom: 10px; font-size: 12px !important; line-height: 18px !important;">

      <div class="crayon-plain-wrap"><textarea class="crayon-plain print-no" data-settings="dblclick" readonly style="-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 12px !important; line-height: 18px !important;">
find /path/to/target_directory -type f -exec sh -c '
perl /path/to/fanyi.pl $0 $0.new &amp;amp;&amp;amp;
mv $0.new $0
' {} \;</textarea></div>
      <div class="crayon-main" style="">
        <table class="crayon-table">
          <tr class="crayon-row">
        <td class="crayon-nums " data-settings="show">
          <div class="crayon-nums-content" style="font-size: 12px !important; line-height: 18px !important;"><div class="crayon-num" data-line="crayon-676a611039d7b678566938-1">1</div><div class="crayon-num crayon-striped-num" data-line="crayon-676a611039d7b678566938-2">2</div><div class="crayon-num" data-line="crayon-676a611039d7b678566938-3">3</div><div class="crayon-num crayon-striped-num" data-line="crayon-676a611039d7b678566938-4">4</div></div>
        </td>
            <td class="crayon-code"><div class="crayon-pre" style="font-size: 12px !important; line-height: 18px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;"><div class="crayon-line" id="crayon-676a611039d7b678566938-1"><span class="crayon-r">find</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">path</span><span class="crayon-o">/</span><span class="crayon-st">to</span><span class="crayon-o">/</span><span class="crayon-v">target_directory</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-r">type</span><span class="crayon-h"> </span><span class="crayon-v">f</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-e">exec </span><span class="crayon-r">sh</span><span class="crayon-h"> </span><span class="crayon-o">-</span><span class="crayon-i">c</span><span class="crayon-h"> </span>'</div><div class="crayon-line crayon-striped-line" id="crayon-676a611039d7b678566938-2"><span class="crayon-v">perl</span><span class="crayon-h"> </span><span class="crayon-o">/</span><span class="crayon-v">path</span><span class="crayon-o">/</span><span class="crayon-st">to</span><span class="crayon-o">/</span><span class="crayon-v">fanyi</span><span class="crayon-e">.pl</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-cn">0</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-cn">0.new</span><span class="crayon-h"> </span><span class="crayon-o">&amp;</span><span class="crayon-v">amp</span><span class="crayon-sy">;</span><span class="crayon-o">&amp;</span><span class="crayon-v">amp</span><span class="crayon-sy">;</span></div><div class="crayon-line" id="crayon-676a611039d7b678566938-3"><span class="crayon-r">mv</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-cn">0.new</span><span class="crayon-h"> </span><span class="crayon-sy">$</span><span class="crayon-cn">0</span></div><div class="crayon-line crayon-striped-line" id="crayon-676a611039d7b678566938-4">'<span class="crayon-h"> </span><span class="crayon-sy">{</span><span class="crayon-sy">}</span><span class="crayon-h"> </span><span class="crayon-sy">\</span><span class="crayon-sy">;</span></div></div></td>
          </tr>
        </table>
      </div>
    </div>
<!-- [Format Time: 0.0006 seconds] -->
<p></p>
<p>Check out the <a href="https://github.com/jmodjeska/fanyi" target="_blank" rel="noopener">project on Github</a>.</p>


                </div><!-- /post -->
              </section>
            </div> <!-- /blog-media -->
          </article>
        </div><!-- /col -->
      </div><!-- /row -->
    </div><!-- /container -->
  </div><!-- /wrapper -->

  <div id="social">
    <div class="container">
      <div class="row centered">
        <div class="col-xs-2">
          &nbsp;
        </div><!-- /col -->
        <div class="col-xs-2">
          <a href="https://instagr.am/jmodjeska" title="instagram" target="_blank">
            <i class="fa fa-instagram"></i>
          </a>
        </div><!-- /col -->
        <div class="col-xs-2">
          <a href="https://linkedin.com/in/modjeska" title="linkedin" target="_blank">
            <i class="fa fa-linkedin"></i>
          </a>
        </div><!-- /col -->
        <div class="col-xs-2">
          <a href="https://github.com/jmodjeska" title="github" target="_blank">
            <i class="fa fa-github"></i>
          </a>
        </div><!-- /col -->
        <div class="col-xs-2">
          <a href="https://uberworld.org" title="uberworld" target="_blank">
            <i class="fa fa-terminal"></i>
          </a>
        </div><!-- /col -->
        <div class="col-xs-2">
          &nbsp;
        </div><!-- /col -->
      </div><!-- /row -->
    </div><!-- /container -->
  </div><!-- /social -->

  <footer id="footerwrap">
    <div class="container">
      <div class="row centered">
        <div class="col-lg-2"></div>
        <div class="col-lg-8">
          <div id="text-6" class="widget_text">
            <h4 id="widget-title-one" class="widget-title-footer">ABOUT</h4>
            <div class="hline-w"></div>
            <div class="textwidget">
              <p>This personal website of Jeremy Modjeska is &copy; by the author
              <a href="http://creativecommons.org/licenses/by-nc-nd/2.5/legalcode">BY-NC-ND</a>.
              Powered by a herd of Siberian mountain goats.
              This website is not suitable for carbon-based lifeforms.</p>
            </div>
          </div>
        </div><!-- /col -->
      </div><!-- /row -->
    </div><!-- /container -->
  </footer>

  <script>
    var cmsg = (function(){ /*

       __
      /\_\     ___ ___
      \/\ \  /' __` __`\
       \ \ \ /\ \/\ \/\ \
       _\ \ \\ \_\ \_\ \_\
      /\ \_\ \\/_/\/_/\/_/
      \ \____/
       \/___/

      */}).toString().split('\n').slice(1, -1).join('\n');
    console.log(cmsg);
  </script>
</body>
</html>
